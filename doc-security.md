# 20200710會議報告書

## 一、前端框架渲染
傳統非框架頁面，資料庫提供動態畫面字串時由伺服器進行渲染，當字串到達瀏覽器時已經是HTML結構。然而文字如果是由惡意使用者輸入，此時就存在一個潛在問題，當它內容是公開的文字時就會把&lt;script&gt;&lt;/script&gt;標籤無差別渲染，進而產生資安漏洞。<br>
現代JS框架，它避開傳統 Server Site Render 在伺服器直接執行畫面渲染，把將動態資料與靜態資料拆分處理。靜態資料，也就是由開發人員事先定義好的資料來進行畫面渲染。而動態資料當到達前端時是純字串格式，並不具有任何執行能力。最危險具潛藏風險的資料就是動態資料，所以資料到達前端時可以進行字串檢查，比方說常見的 &gt; 、 &quot; 、 &#x27; 、 &#x2F; 、 &amp; 等符號，都是攻擊常用的特殊字元，可以進一步篩選再來輸出，或是使用預設的純字串渲染，相對來說相當安全。<br>
像是 Vue 則使用 v-html 來還原 html 字串， React 則是使用 dangerouslySetInnerHTML 。但為避免 XSS 留下&lt;script&gt;&lt;/script&gt;，盡量會避免使用該方法來還原動態資料。一般會使用該方式的應用場景為網頁生成器與文字編輯器，通常會禁止使用者進行原始碼編輯行為，來防堵該潛在危險因子。

## 二、前端弱點掃描常見問題

| 問題 | 解決方案 |
|  ----  | ---- |
| 程式結構資訊外漏 | 正式發布部屬時，要清除所有註解、consle，並將其最小化壓縮。 |
| cooike 資訊外洩 | 避免使用 cooike ，必要使用時需設為 Secure 處理，並不可放置敏感資訊，避免 CRSF攻擊。 |
| 表單輸入 XSS 問題 | 參*註1 |
| 動態渲染 HTML 問題 | 針對後端回送到前端的資料要進行資料比對與替換，避免執行類的原始碼。 |
| URL結構弱點 | 重新定義URL，對於序列要進行雜湊後顯示。 |
| 外部引用套件資訊洩漏 | 最常見的就是 Google Analytics ，套件本身必須要有針對 Secure 的設定。 |
| 未進行HTTPS傳輸加密 | 為網域申請SSL。 |

### 註1: XSS 攻擊處理
#### Stored XSS 儲存型攻擊
* 使用輸入性的文字框進行攻擊<br>
解決：針對輸入文字進行驗證阻擋與替換字元
#### Reflected XSS 反射型攻擊
* 由後端回送資料發生攻擊<br>
解決：對於POST到後端的資料要經過雜湊加密/解密，無法通過直接輸入方式進行前後端溝通。
#### DOM-Based XSS DOM型攻擊
* 在DOM上進行攻擊<br>
解決：針對URL相關的動態參數進行處理，比如: src、href 等，對於DOM綁定事件要進行唯讀處理，比如: onclick、onchange。

## 三、Webpack技術使用分析
Webpack 是一種基於node.js開發的前端打包工具，可以將大量、複雜的檔案一次進行打包，讓欲上傳網頁的資料盡可能最小化，並進行大量的預處理行為。像是過去常見的 Pug、SASS、babel...等等都是前端預處理的語法，讓傳統 HTML、CSS、JS 極其繁雜難以閱讀及維護的語法簡化，並加上程式邏輯提高開發效率。而這些工具日積月累發展至現今使用起來反而變雜亂，多元的工具引入造成管理難度上升，因而誕生webpack。<br>
Webpack 可以將 HTML、CSS、JS 進行預處理編譯，將其打包成最少量且最精簡的檔案。也可以整合各種套件來做程式的管控與優化，提高開發的可控性及維護性。目前是前端用來進行專案開發最主流的打包工具。<br>
當然，Webpack也不是無缺點，所以也有許多開發者使用不同的打包工具，比如說 gulp.js、parcel.js、rollup.js ，各自有自已的特色與性能。
以下羅列分析 Webpack 與傳統開發的優勢與劣勢:

| 項目 | 傳統開發 | webpack |
| ---- | ---- | ---- |
| 可閱讀性 | 什麼程式就在什麼檔案，一看就知道。 | 高度模組化，減少相似檔案。 |
| 預處理套件 | 要另外進行編譯與檔案管理，或是直接引入頁面。 | 集中進行編譯，預處理性質的不再進入頁面。 |
| 學習曲線 | 需要什麼工具再引入再學習 。| 難學，團隊沒有會寫設定的人會遇上非常多問題。 |
| JS使用 | 使用ES5。 | 使用ES6以上。 |
| 維護性質 | 針對要修改的部分進行修改。 | 針對組件統一進行修改，對單一頁面進行修改則使用判斷式。 |
| 可複用性 | 要從單檔拆出功能，或另寫插件。 | 組件可以依據帶入參數客製化，直接引入需求區塊。 |
| 程式安全性 | 對於自架內容一樣需要封裝加工 | 連同編譯完成後將原始碼可以進行變數重新命名，最小化處理。 |

常用的 Webpack 套件
* css-loader: 進行 CSS 的預處理打包，可以對 className 執行哈希重新命名
* sass-loader: 進行 SASS、SCSS 的預處理編譯與打包。
* pug-loader: 進行 PUG 的預處理編譯與打包。
* babal-loader: 可以應用各種較新的 JS 語法，包含 ES6+、JSX 等語法。
* vue-loader: 使用 vue 框架可以採用 .vue 檔的開發，讓組件化開發更加容易。
* ESlint: 預處理程式碼的結構，可以讓程式在團隊的可閱讀性提升，並限制不理想的程式編寫方式。

## DDoS/CC 攻擊 與登入驗證

### Distributed Denial-Of-Service attack && Challenge Collapsar (DDoS/CC)
DDoS/CC 是使用自動操作系統針對特定網站進行高速操作去消耗伺服器的資源，以導致伺服器癱瘓。主要的防護方式有更改 Web Port，並針對大量不正常請求的IP進行屏蔽，
### reCAPTCHA
reCAPTCHA 是 Google 基於圖形驗證與滑鼠軌跡紀錄開發來辨識機器人的工具，是目前較主流的防機器人手段。

## 什麼是SPA?
### SPA說明
SPA又稱單頁應用程式，畫面渲染交由前端JS來進行處理。

### Multiple Page Application / Server Site Render (MPA/SSR)
優點：<br>
1. 學習容易
2. 開發快速
3. SEO效果優良

缺點：<br>
1. 每次換頁都重新加載公用數據
2. 當專案複雜時難以維護
3. 需大量使用 Cookie 和 Session 來記錄跳頁資料

### Single Page Application / Client Site Render (SPA/CSR)
優點：<br>
1. 切換頁快速，用戶體驗好
2. 減少對伺服器的資料要求
3. 對於跳頁數據傳遞方便
4. 對複雜或具規模的專案較易於管理

缺點：<br>
1. 對SEO不友善(目前Google搜尋引擎已無這問題)
2. 學習成本高昂，需要搭配框架處理
3. 首次進入網站讀取較久

## CKeditor XSS 處理
針對 CKeditor 在安全方面的處理主要以下幾種方式
1. 黑名單：設定阻擋所限制的 Tag、屬性。
2. 白名單：設定阻擋未設定通行的所有元素。
3. 關閉原始碼工具： 關閉 Toolbar 的原始碼編輯工具。

## MVC

## Honeypot